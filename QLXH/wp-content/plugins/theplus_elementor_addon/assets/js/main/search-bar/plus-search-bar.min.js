(function(a){"use strict";function b(b){let c=b[0].querySelector(".tp-rental-overlay"),d=b[0].querySelector(".tp-input-field");a(".tp-search-input",b).on({focus:function(){c.style.cssText="visibility:visible;opacity:1;",d.style.cssText="z-index:1000;"},focusout:function(){c.style.cssText="visibility:hidden;opacity:0;",d.style.cssText="z-index:0;"}}),a(".tp-select",b).on("click",function(){c.style.cssText="visibility:visible;opacity:1;"}),a(".tp-rental-overlay",b).on("click",function(){c.style.cssText="visibility:hidden;opacity:0;"}),b.keyup(function(a){"Escape"===a.key&&(c.style.cssText="visibility:hidden;opacity:0;")})}var c=function(a,c){var d=a[0].querySelectorAll(".tp-search-bar"),e=c(".tp-search-bar",a),f=e.data("ajax_search"),g=e.data("acfdata"),h=e.data("genericfilter"),i=e.find(".tp-search-list-inner"),j=e.find(".tp-search-area"),k=e.find(".tp-search-header"),l=d[0].dataset?JSON.parse(d[0].dataset.resultSetting):[],m=d[0].dataset?JSON.parse(d[0].dataset.paginationData):[],n=d[0].dataset?JSON.parse(d[0].dataset.defaultData):[];i.css("transform","translateX(0)");let o=d[0].querySelectorAll(".tp-rental-overlay");0<o.length&&b(a);let p=d[0].querySelectorAll(".tp-sbar-dropdown");if(0<p.length&&(c(".tp-sbar-dropdown",a).on("click",function(){c(this).attr("tabindex",1).focus(),c(this).toggleClass("active"),c(this).find(".tp-sbar-dropdown-menu").slideToggle(300)}),c(".tp-sbar-dropdown",a).focusout(function(){c(this).removeClass("active"),c(this).find(".tp-sbar-dropdown-menu").slideUp(300)}),c(".tp-sbar-dropdown .tp-sbar-dropdown-menu .tp-searchbar-li",a).on("click",function(){c(this).parents(".tp-sbar-dropdown").find("span").text(c(this).text()),c(this).parents(".tp-sbar-dropdown").find("input").attr("value",c(this).attr("id")).change()})),"yes"==f.ajax){function b(){let b=c("input[name=s]",a).val(),e=c("input[name=taxonomy]",a).val(),o=c("input[name=post_type]",a).val();i.html(""),k.find(".tp-search-pagina",a).html("");let p={action:"tp_search_bar",searchData:c(".tp-search-form",a).serialize(),text:b,postper:f.post_page,GFilter:h,ACFilter:g,ResultData:m,DefaultData:n,nonce:f.nonce};jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:p,beforeSend:function(){"pagination"==m.Pagestyle&&(d[0].querySelector(".tp-search-list-inner").style.cssText="transform: translateX(0px)")},success:function(a){let b=d[0].querySelectorAll(".tp-search-error"),c=d[0].querySelector(".tp-search-header");if(a.data.error&&0<b.length)return b[0].innerHTML=a.data.message,c.style.cssText="display:none",void j.slideDown(100);c.style.cssText="display:flex",b[0].innerHTML="";var e=a&&a.data?a.data:"";if(e&&0!==e.post_count){let a=e.posts,b=null,c="",f="<div class=\""+".tp-search-slider tp-row".replace(".","")+"\">%s</div>",g="";for(b in j.slideDown(100),a)g+=t(a[b]),(0==(parseInt(b)+1)%e.limit_query||parseInt(b)===a.length-1)&&(c+=f.replace("%s",g),g="");if(i.html(c),l.TotalResult){let a=l.TotalResultTxt?l.TotalResultTxt:"";k.find(".tp-search-resultcount").html(e.post_count+" "+a)}if(e.pagination)d[0].querySelector(".tp-search-pagina").innerHTML=e.pagination,w(".tp-search-slider tp-row",i,e,p);else if(!e.loadmore)e.lazymore&&e.total_count>e.limit_query&&(d[0].querySelector(".ajax_lazy_load").innerHTML=e.lazymore,v(".tp-search-slider tp-row",i,e,p));else if(e.total_count>e.limit_query){let a=d[0].querySelectorAll(".ajax_load_more");0<a.length&&a[0].insertAdjacentHTML("afterbegin",e.loadmore),u(e,p)}else{let a=d[0].querySelectorAll(".tp-search-pagina");0<a.length&&(a[0].innerHTML=e.loadmore_page)}}else return b[0].innerHTML=l.errormsg,c.style.cssText="display:none",void j.slideDown(400)},complete:function(){}}).then(function(){setTimeout(function(){d[0].querySelector(".tp-ajx-loading").style.cssText="display:none",d[0].querySelector(".tp-close-btn").style.cssText="display:flex"},500),z()})}var q=m.PNavigation?m.PNavigation:0,r=f&&f.post_page?f.post_page:3,s=f&&f.ajaxsearchCharLimit?f.ajaxsearchCharLimit:3;let o=null;c(d[0]).on("change keyup",function(f){let e=f.type,g=c("input[name=s]",a).val(),h=c("input[name=post_type]",a).val(),i=c("input[name=taxonomy]",a).val(),j=c("input[name=cat]",a).val();"keyup"==e&&g.length>s||"change"==e&&(h||h&&g.length>s||""==h&&g.length>s)||j||j&&g.length>s||""==j&&g.length>s?(d[0].querySelector(".tp-close-btn").style.cssText="display:none",d[0].querySelector(".tp-ajx-loading").style.cssText="display:flex",clearTimeout(o),o=setTimeout(b.bind(void 0,f.target.value),400)):d[0].querySelectorAll(".tp-close-btn")})}var t=function(a){let b="",c=a.title?a.title:"",d=a.content?a.content:"",e=l&&l.ResultlinkOn?l.ResultlinkOn:"",g=e&&l&&l.Resultlinktarget?`target="${l.Resultlinktarget}"`:"",h=e&&a&&a.link?`href="${a.link}"`:"";if(l.textlimit){if(l.TxtTitle){let a=l.textcount?l.textcount:100,b=l.textdots?l.textdots:"";"char"==l.texttype?c=c.substring(0,a)+b:"word"==l.texttype&&(c=c.split(" ",a).toString().replace(/,/g," ")+b)}if(l.Txtcont){let a=l.ContCount?l.ContCount:100,b=l.ContDots?l.ContDots:"";"char"==l.ContType?d=d.substring(0,a)+b:"word"==l.ContType&&(d=d.split(" ",a).toString().replace(/,/g," ")+b)}}return b+=`<div class="tp-ser-item ${f.styleColumn}"><a class="tp-serpost-link" ${h} ${g}>`,l.ONThumb&&a.thumb&&(b+=`<div class="tp-serpost-thumb"><img class="tp-item-image" src="${a.thumb}""></div>`),b+=`<div class="tp-serpost-wrap">`,(l.ONTitle&&c||l.ONPrice&&a.Wo_Price)&&(b+=`<div class="tp-serpost-inner-wrap">`,l.ONTitle&&c&&(b+=`<div class="tp-serpost-title">${c}</div>`),l.ONPrice&&a.Wo_Price&&(b+=`<div class="tp-serpost-price">${a.Wo_Price}</div>`),b+=`</div>`),l.ONContent&&d&&(b+=`<div class="tp-serpost-excerpt">${d}</div>`),l.ONShortDesc&&a.Wo_shortDesc&&(b+=`<div class="tp-serpost-shortDesc">${a.Wo_shortDesc}</div>`),b+=`</div></a></div>`,b},u=function(a,b){let c=d[0].querySelectorAll(".post-load-more"),e=d[0].querySelector(".tp-search-slider"),f=d[0].querySelectorAll(".tp-search-pagina");0<f.length&&a.loadmore_page&&f[0].insertAdjacentHTML("beforeend",a.loadmore_page),0<c.length&&c[0].addEventListener("click",function(){let a=+this.dataset.page,g=+(a+1),h=d[0].querySelectorAll(".tp-ser-item");b.offset=h.length,b.loadNumpost=m.loadnumber,jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:b,beforeSend:function(){c[0].textContent=m.loadingtxt},success:function(a){let b=a.data.posts,h=a.data.total_count,i=null,j="";for(i in b)j+=t(b[i]);if(e.insertAdjacentHTML("beforeend",j),c[0].dataset&&c[0].dataset.page&&(c[0].dataset.page=g),0<f.length){let a=f[0].querySelectorAll(".tp-load-number");0<a.length&&(a[0].textContent=g,A(a[0],400))}let k=d[0].querySelectorAll(".tp-ser-item");k.length>=h&&(c[0].classList.add("tp-hide"),c[0].parentNode.insertAdjacentHTML("beforeend",`<div class="plus-all-posts-loaded">${m.loadedtxt}</div>`))},complete:function(){c[0].textContent=m.loadbtntxt}})})},v=function(a,b,e,f){let g=d[0].querySelectorAll(".post-lazy-load"),h=d[0].querySelector(".tp-search-slider");var i,j,k,l,n,o,p=c(window),q=function(){i=p.width(),j=p.height(),k=c("body").height(),n=c(".tp-search-area").height(),o=c(".tp-search-area").offset().top+50,setTimeout(function(){n=c(".tp-search-area").height(),o=c(".tp-search-area").offset().top+50},50)};q(),p.resize(q),p.bind("scroll",function(a){a.preventDefault(),q(),l=p.scrollTop(),n=c(".tp-search-area").height(),o=c(".tp-search-area").offset().top+50;var b=c(".tp-search-area").find(".post-lazy-load"),e=d[0].querySelectorAll(".tp-ser-item");if(f.offset=e.length,f.loadNumpost=m.loadnumber,c(".tp-search-area").find(".post-lazy-load").length&&l<k&&l+60>n+o-j){if(b.data("requestRunning"))return;b.data("requestRunning",!0),jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,c=a.data.total_count,e=null,f="";for(e in b)f+=t(b[e]);h.insertAdjacentHTML("beforeend",f);let i=d[0].querySelectorAll(".tp-ser-item");i.length==c&&(g[0].classList.add("tp-hide"),g[0].parentNode.insertAdjacentHTML("beforeend",`<div class="plus-all-posts-loaded">${m.loadedtxt}</div>`),p.unbind("scroll"))},complete:function(){b.data("requestRunning",!1)}})}})},w=function(a,b,e,f){let g=d[0].querySelector(".tp-search-list-inner"),h=d[0].querySelectorAll(".tp-pagelink.tp-ajax-page"),i=d[0].querySelectorAll(".tp-pagelink.next"),j=d[0].querySelectorAll(".tp-pagelink.prev"),k=m.Pcounter?m.Pcounter:0,l=m.PClimit?m.PClimit:3;0<h.length&&h.forEach(function(a,b){if(1==+a.dataset.page){let a=d[0].querySelectorAll(".tp-search-slider");0<a.length&&a[0].classList.add("ajax-1")}else c(g).append("<div class=\"tp-search-slider tp-row ajax-"+ +(b+1)+"\"></div>");a.addEventListener("click",function(){let a=this.dataset.page,d=100*b;f.offset=a*r-r,y(h,a),q&&(j[0].setAttribute("data-prev",a),i[0].setAttribute("data-next",a));let k=g.querySelectorAll(".tp-search-slider.ajax-"+a);return 0<k.length&&k[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+-d+"%)",void x(e)):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,f=null,h="";for(f in b)h+=t(b[f]);c(k[0]).append(h),g.style.cssText="transform: translateX("+-d+"%)",x(e)},complete:function(){}})})}),0<i.length&&i[0].addEventListener("click",function(){let a=+this.dataset.next,b=a+1,d=-(100*a);f.offset=b*r-r,k&&h.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("tp-hide")){a.classList.remove("tp-hide"),h.forEach(function(a,b){+(c+1-l)==b+1&&a.classList.add("tp-hide")})}}),y(h,b),q&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=g.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+d+"%)",void x(e)):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,f=null,h="";for(f in b)h+=t(b[f]);c(m[0]).append(h),g.style.cssText="transform: translateX("+d+"%)",x(e)},complete:function(){}})}),0<j.length&&j[0].addEventListener("click",function(){let a=+this.dataset.prev,b=a-1,d=-(100*b)+100;f.offset=b*r-r,k&&h.forEach(function(a,c){if(b==+a.dataset.page&&a.classList.contains("tp-hide")){a.classList.remove("tp-hide"),h.forEach(function(a,b){+(c+1+l)==b+1&&a.classList.add("tp-hide")})}}),y(h,b),q&&(j[0].setAttribute("data-prev",b),i[0].setAttribute("data-next",b));let m=g.querySelectorAll(".tp-search-slider.ajax-"+b);return 0<m.length&&m[0].querySelector(".tp-ser-item")?(g.style.cssText="transform: translateX("+d+"%)",void x(e)):void jQuery.ajax({url:theplus_ajax_url,method:"post",async:!0,data:f,beforeSend:function(){},success:function(a){let b=a.data.posts,f=null,h="";for(f in b)h+=t(b[f]);c(m[0]).append(h),g.style.cssText="transform: translateX("+d+"%)",x(e)},complete:function(){}})})},x=function(a){if(a.columns){let b=d[0].querySelector(".tp-pagelink.next").dataset.next;parseInt(b)==a.columns?c(".tp-pagelink.next").hide():c(".tp-pagelink.next").show();let e=d[0].querySelector(".tp-pagelink.prev").dataset.prev;1==parseInt(e)?c(".tp-pagelink.prev").hide():c(".tp-pagelink.prev").show()}},y=function(a,b){0<a.length&&a.forEach(function(a){b==+a.dataset.page?a.classList.add("active"):a.classList.contains("active")&&a.classList.remove("active")})},z=function(){let b=d[0].querySelector(".tp-search-area"),f=d[0].querySelector("input[name=s]"),g=a[0].querySelectorAll(".tp-rental-overlay"),h=d[0].querySelector(".tp-close-btn");c(".tp-close-btn",a).on("click",function(){f.value="",c(this).hide(),c(b).slideUp(),0<g.length&&(g[0].style.cssText="visibility:hidden;opacity:0;")}),e.keyup(function(a){"Escape"===a.key&&(f.value="",c(b).slideUp(),h.style.cssText="display:none")})},A=function(a,b=600){a.style.display="",a.style.opacity=0;var c=+new Date,d=function(){a.style.opacity=+a.style.opacity+(new Date-c)/b,c=+new Date,1>+a.style.opacity&&(window.requestAnimationFrame&&requestAnimationFrame(d)||setTimeout(d,16))};d()}};window.addEventListener("elementor/frontend/init",()=>{elementorFrontend.hooks.addAction("frontend/element_ready/tp-search-bar.default",c)})})(jQuery);