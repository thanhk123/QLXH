(function(a){function b(b="",d="",e=""){setTimeout(function(){if(h){let f=h.form_fields,g="<option value=\"\" selected></option>"+e,i=0;a(f.models).each(function(a,b){""===b.attributes.field_label?(i++,g+="<option value=\""+b.attributes.custom_id+"\">Item #"+i+"</option>"):(i++,g+="<option value=\""+b.attributes.custom_id+"\">"+b.attributes.field_label+"</option>")}),a(f.models).each(function(e,f){var i=!1;if(a(".elementor-control-custom_id input").each(function(){a(this).val()===f.attributes.custom_id&&(i=a(this))}),b){let e=a(b).first();if(e)if(e.closest(".elementor-control-type-repeater").length)e.closest(".elementor-control-type-repeater").hasClass("elementor-control-"+d)&&a(b).each(function(b){let e=a(this).attr("data-setting"),f=h[d].models[b].attributes[e];"undefined"!=typeof f&&c(a(this),g,f,i)});else{let a=e.data("setting"),b=h[a];"undefined"!=typeof b&&c(e,g,b,i)}}})}},1e3)}function c(a,b,c,d){if(a){let e=!1;a.hasClass("select2-hidden-accessible")&&(a.select2("destroy"),e=!0),a.html(b),d&&a.find("option[value='"+d.val()+"']").remove(),a.val(c),e&&a.select2()}}function d(){let b=[];return"yes"===h.ap_register_phone_popover&&""!==h.ap_register_user_phone&&b.push("user_phone"),"yes"===h.ap_register_email_popover&&"yes"===h.ap_register_enable_email_verification&&b.push("is_email_verified"),"yes"===h.ap_register_phone_popover&&"yes"===h.ap_register_enable_phone_verification&&b.push("is_phone_verified"),"yes"===h.ap_register_manual_verification_popover&&"yes"===h.ap_register_enable_manual_verification&&b.push("is_manually_verified"),a(h.ap_user_additional_fields.models).each(function(a,c){""!==c.attributes.ap_register_additional_user_field&&("custom"===c.attributes.ap_register_additional_user_field?""!==c.attributes.ap_register_additional_user_field_custom&&b.push(c.attributes.ap_register_additional_user_field_custom):b.push(c.attributes.ap_register_additional_user_field))}),[...new Set(b)].join()}function e(b){a.ajax({url:ajaxurl,type:"post",dataType:"json",data:{action:"ap_update_option_value",optionValuePairs:b}})}let f=a(document),g=null,h=null,i=a("#elementor-preview-iframe")[0];elementor.hooks.addAction("panel/open_editor/widget/form",(a,b,c)=>{h=elementorFrontend.config.elements.data[b.cid].attributes,g=c.$el}),window.apUserAdditionalTitle=function(a,b){return"custom"===a?b:a},f.on("click","#elementor-panel-saver-button-publish",function(){if(null!==h){let a=h.submit_actions;switch(!0){case a.includes("register"):e({register_user_metas:d(),manual_verification_email_from_name:h.ap_register_manual_verification_email_from_name,manual_verification_email_from:h.ap_register_manual_verification_email_from,manual_verification_email_subject:h.ap_register_manual_verification_email_subject,manual_verification_email_content_type:h.ap_register_manual_verification_email_content_type,manual_verification_email_message:h.ap_register_manual_verification_email_message});break;case a.includes("login"):e({default_login_page_redirection_url:h.ap_default_login_page_redirection_url,remember_me_duration:h.ap_login_remember_me_duration});break;case a.includes("ap_profile"):e({profile_page_url:h.ap_profile_change_default_url.url});}}}),f.on("mouseup",".elementor-control-type-section",function(){if(!(a(this).hasClass("elementor-control-ap_register_otp_style")||a(this).hasClass("elementor-control-ap_login_otp_style")||a(this).hasClass("elementor-control-ap_reset_pass_otp_style")))(a(".elementor-control-ap_register_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_login_otp_style").hasClass("elementor-open"))&&g.find(".ap-otp-container").remove();else if(a(this).hasClass("elementor-open"))g.find(".ap-otp-container").remove();else{let a="register"===h.submit_actions?h.ap_register_email_otp_length:"login"===h.submit_actions?h.ap_login_otp_length:h.ap_reset_pass_otp_length;const b=i.contentWindow.ap_generate_otp_modal("",{email:{length:a,nonce:""}},{email:{nonce:""}},{email:{nonce:""}});g.append(b)}}),f.on("mouseup",".elementor-tab-control-content",function(){(a(".elementor-control-ap_register_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_login_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_reset_pass_otp_style").hasClass("elementor-open"))&&g.find(".ap-otp-container").remove()}),f.on("mouseup",".elementor-tab-control-advanced",function(){(a(".elementor-control-ap_register_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_login_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_reset_pass_otp_style").hasClass("elementor-open"))&&g.find(".ap-otp-container").remove()}),f.on("change",".elementor-tab-control-advanced",function(){(a(".elementor-control-ap_register_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_login_otp_style").hasClass("elementor-open")||a(".elementor-control-ap_reset_pass_otp_style").hasClass("elementor-open"))&&g.find(".ap-otp-container").remove()}),f.on("change",".elementor-control-custom_id input",function(){b()}),f.on("click",".elementor-control-form_fields .elementor-repeater-add",function(){b()}),f.on("mouseup",".elementor-control-form_fields .elementor-repeater-row-tool",function(){b()}),f.on("mouseup",".elementor-control-ap_section_register",function(){b(".elementor-control-ap_register_let_users_choose select"),b(".elementor-control-ap_register_username select"),b(".elementor-control-ap_register_password select"),b(".elementor-control-ap_register_password_confirm select"),b(".elementor-control-ap_register_user_email select"),b(".elementor-control-ap_register_user_phone select"),b(".elementor-control-ap_register_additional_form_field select","ap_user_additional_fields")}),f.on("click",".elementor-control-ap_user_additional_fields .elementor-repeater-add",function(){b(".elementor-control-ap_register_additional_form_field select","ap_user_additional_fields")}),f.on("mouseup",".elementor-control-ap_user_additional_fields .elementor-repeater-tool-duplicate",function(){b(".elementor-control-ap_register_additional_form_field select","ap_user_additional_fields")}),f.on("mouseup",".elementor-control-ap_section_login",function(){b(".elementor-control-ap_login_user select"),b(".elementor-control-ap_login_password select"),b(".elementor-control-ap_login_remember_me select")}),f.on("mouseup",".elementor-control-ap_section_reset_pass",function(){b(".elementor-control-ap_reset_pass_login_id select"),b(".elementor-control-ap_reset_pass_new_password select")}),f.on("mouseup",".elementor-control-ap_section_profile",function(){b(".elementor-control-ap_profile_form_field select","ap_profile_fields")}),f.on("click",".elementor-control-ap_profile_fields .elementor-repeater-add",function(){b(".elementor-control-ap_profile_form_field select","ap_profile_fields")}),f.on("mouseup",".elementor-control-ap_profile_fields .elementor-repeater-tool-duplicate",function(){b(".elementor-control-ap_profile_form_field select","ap_profile_fields")});let j="<option value=\"meta\">Meta Data</option>";f.on("mouseup",".elementor-control-ap_section_google_sheet",function(){b(".elementor-control-ap_google_sheet_form_field select","ap_google_sheet_mapping",j)}),f.on("click",".elementor-control-ap_google_sheet_mapping .elementor-repeater-add",function(){b(".elementor-control-ap_google_sheet_form_field select","ap_google_sheet_mapping",j)}),f.on("mouseup",".elementor-control-ap_google_sheet_mapping .elementor-repeater-row-tools",function(){b(".elementor-control-ap_google_sheet_form_field select","ap_google_sheet_mapping",j)})})(jQuery);